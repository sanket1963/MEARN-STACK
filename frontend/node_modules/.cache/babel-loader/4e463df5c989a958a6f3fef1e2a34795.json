{"ast":null,"code":"import React,{Fragment,useEffect,useState}from\"react\";import{DataGrid}from\"@material-ui/data-grid\";import\"./productReviews.css\";import{useSelector,useDispatch}from\"react-redux\";import{clearErrors,getAllReviews,deleteReviews}from\"../../actions/productAction\";import{useAlert}from\"react-alert\";import{Button}from\"@material-ui/core\";import MetaData from\"../layout/MetaData\";import DeleteIcon from\"@material-ui/icons/Delete\";import Star from\"@material-ui/icons/Star\";import SideBar from\"./Sidebar\";import{DELETE_REVIEW_RESET}from\"../../constants/productConstants\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductReviews=_ref=>{let{history}=_ref;const dispatch=useDispatch();const alert=useAlert();const{error:deleteError,isDeleted}=useSelector(state=>state.review);const{error,reviews,loading}=useSelector(state=>state.productReviews);const[productId,setProductId]=useState(\"\");const deleteReviewHandler=reviewId=>{dispatch(deleteReviews(reviewId,productId));};const productReviewsSubmitHandler=e=>{e.preventDefault();dispatch(getAllReviews(productId));};useEffect(()=>{if(productId.length===24){dispatch(getAllReviews(productId));}if(error){alert.error(error);dispatch(clearErrors());}if(deleteError){alert.error(deleteError);dispatch(clearErrors());}if(isDeleted){alert.success(\"Review Deleted Successfully\");history.push(\"/admin/reviews\");dispatch({type:DELETE_REVIEW_RESET});}},[dispatch,alert,error,deleteError,history,isDeleted,productId]);const columns=[{field:\"id\",headerName:\"Review ID\",minWidth:200,flex:0.5},{field:\"user\",headerName:\"User\",minWidth:200,flex:0.6},{field:\"comment\",headerName:\"Comment\",minWidth:350,flex:1},{field:\"rating\",headerName:\"Rating\",type:\"number\",minWidth:180,flex:0.4,cellClassName:params=>{return params.getValue(params.id,\"rating\")>=3?\"greenColor\":\"redColor\";}},{field:\"actions\",flex:0.3,headerName:\"Actions\",minWidth:150,type:\"number\",sortable:false,renderCell:params=>{return/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Button,{onClick:()=>deleteReviewHandler(params.getValue(params.id,\"id\")),children:/*#__PURE__*/_jsx(DeleteIcon,{})})});}}];const rows=[];reviews&&reviews.forEach(item=>{rows.push({id:item._id,rating:item.rating,comment:item.comment,user:item.name});});return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"ALL REVIEWS - Admin\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"productReviewsContainer\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"productReviewsForm\",onSubmit:productReviewsSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"ALL REVIEWS\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Star,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Product Id\",required:true,value:productId,onChange:e=>setProductId(e.target.value)})]}),/*#__PURE__*/_jsx(Button,{id:\"createProductBtn\",type:\"submit\",disabled:loading?true:false||productId===\"\"?true:false,children:\"Search\"})]}),reviews&&reviews.length>0?/*#__PURE__*/_jsx(DataGrid,{rows:rows,columns:columns,pageSize:10,disableSelectionOnClick:true,className:\"productListTable\",autoHeight:true}):/*#__PURE__*/_jsx(\"h1\",{className:\"productReviewsFormHeading\",children:\"No Reviews Found\"})]})]})]});};export default ProductReviews;","map":{"version":3,"names":["React","Fragment","useEffect","useState","DataGrid","useSelector","useDispatch","clearErrors","getAllReviews","deleteReviews","useAlert","Button","MetaData","DeleteIcon","Star","SideBar","DELETE_REVIEW_RESET","jsx","_jsx","jsxs","_jsxs","ProductReviews","_ref","history","dispatch","alert","error","deleteError","isDeleted","state","review","reviews","loading","productReviews","productId","setProductId","deleteReviewHandler","reviewId","productReviewsSubmitHandler","e","preventDefault","length","success","push","type","columns","field","headerName","minWidth","flex","cellClassName","params","getValue","id","sortable","renderCell","children","onClick","rows","forEach","item","_id","rating","comment","user","name","title","className","onSubmit","placeholder","required","value","onChange","target","disabled","pageSize","disableSelectionOnClick","autoHeight"],"sources":["C:/Users/SANKET TAVETHIYA/Desktop/MERN PRO/frontend/src/component/Admin/ProductReviews.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { DataGrid } from \"@material-ui/data-grid\";\nimport \"./productReviews.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  clearErrors,\n  getAllReviews,\n  deleteReviews,\n} from \"../../actions/productAction\";\nimport { useAlert } from \"react-alert\";\nimport { Button } from \"@material-ui/core\";\nimport MetaData from \"../layout/MetaData\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport Star from \"@material-ui/icons/Star\";\n\nimport SideBar from \"./Sidebar\";\nimport { DELETE_REVIEW_RESET } from \"../../constants/productConstants\";\n\nconst ProductReviews = ({ history }) => {\n  const dispatch = useDispatch();\n\n  const alert = useAlert();\n\n  const { error: deleteError, isDeleted } = useSelector(\n    (state) => state.review\n  );\n\n  const { error, reviews, loading } = useSelector(\n    (state) => state.productReviews\n  );\n\n  const [productId, setProductId] = useState(\"\");\n\n  const deleteReviewHandler = (reviewId) => {\n    dispatch(deleteReviews(reviewId, productId));\n  };\n\n  const productReviewsSubmitHandler = (e) => {\n    e.preventDefault();\n    dispatch(getAllReviews(productId));\n  };\n\n  useEffect(() => {\n    if (productId.length === 24) {\n      dispatch(getAllReviews(productId));\n    }\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (deleteError) {\n      alert.error(deleteError);\n      dispatch(clearErrors());\n    }\n\n    if (isDeleted) {\n      alert.success(\"Review Deleted Successfully\");\n      history.push(\"/admin/reviews\");\n      dispatch({ type: DELETE_REVIEW_RESET });\n    }\n  }, [dispatch, alert, error, deleteError, history, isDeleted, productId]);\n\n  const columns = [\n    { field: \"id\", headerName: \"Review ID\", minWidth: 200, flex: 0.5 },\n\n    {\n      field: \"user\",\n      headerName: \"User\",\n      minWidth: 200,\n      flex: 0.6,\n    },\n\n    {\n      field: \"comment\",\n      headerName: \"Comment\",\n      minWidth: 350,\n      flex: 1,\n    },\n\n    {\n      field: \"rating\",\n      headerName: \"Rating\",\n      type: \"number\",\n      minWidth: 180,\n      flex: 0.4,\n\n      cellClassName: (params) => {\n        return params.getValue(params.id, \"rating\") >= 3\n          ? \"greenColor\"\n          : \"redColor\";\n      },\n    },\n\n    {\n      field: \"actions\",\n      flex: 0.3,\n      headerName: \"Actions\",\n      minWidth: 150,\n      type: \"number\",\n      sortable: false,\n      renderCell: (params) => {\n        return (\n          <Fragment>\n            <Button\n              onClick={() =>\n                deleteReviewHandler(params.getValue(params.id, \"id\"))\n              }\n            >\n              <DeleteIcon />\n            </Button>\n          </Fragment>\n        );\n      },\n    },\n  ];\n\n  const rows = [];\n\n  reviews &&\n    reviews.forEach((item) => {\n      rows.push({\n        id: item._id,\n        rating: item.rating,\n        comment: item.comment,\n        user: item.name,\n      });\n    });\n\n  return (\n    <Fragment>\n      <MetaData title={`ALL REVIEWS - Admin`} />\n\n      <div className=\"dashboard\">\n        <SideBar />\n        <div className=\"productReviewsContainer\">\n          <form\n            className=\"productReviewsForm\"\n            onSubmit={productReviewsSubmitHandler}\n          >\n            <h1 className=\"productReviewsFormHeading\">ALL REVIEWS</h1>\n\n            <div>\n              <Star />\n              <input\n                type=\"text\"\n                placeholder=\"Product Id\"\n                required\n                value={productId}\n                onChange={(e) => setProductId(e.target.value)}\n              />\n            </div>\n\n            <Button\n              id=\"createProductBtn\"\n              type=\"submit\"\n              disabled={\n                loading ? true : false || productId === \"\" ? true : false\n              }\n            >\n              Search\n            </Button>\n          </form>\n\n          {reviews && reviews.length > 0 ? (\n            <DataGrid\n              rows={rows}\n              columns={columns}\n              pageSize={10}\n              disableSelectionOnClick\n              className=\"productListTable\"\n              autoHeight\n            />\n          ) : (\n            <h1 className=\"productReviewsFormHeading\">No Reviews Found</h1>\n          )}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default ProductReviews;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}