{"ast":null,"code":"import React,{Fragment,useEffect,useState}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{useAlert}from\"react-alert\";import{Button}from\"@material-ui/core\";import MetaData from\"../layout/MetaData\";import MailOutlineIcon from\"@material-ui/icons/MailOutline\";import PersonIcon from\"@material-ui/icons/Person\";import VerifiedUserIcon from\"@material-ui/icons/VerifiedUser\";import SideBar from\"./Sidebar\";import{UPDATE_USER_RESET}from\"../../constants/userConstants\";import{getUserDetails,updateUser,clearErrors}from\"../../actions/userAction\";import Loader from\"../layout/Loader/Loader\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UpdateUser=_ref=>{let{history,match}=_ref;const dispatch=useDispatch();const alert=useAlert();const{loading,error,user}=useSelector(state=>state.userDetails);const{loading:updateLoading,error:updateError,isUpdated}=useSelector(state=>state.profile);const[name,setName]=useState(\"\");const[email,setEmail]=useState(\"\");const[role,setRole]=useState(\"\");const userId=match.params.id;useEffect(()=>{if(user&&user._id!==userId){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setRole(user.role);}if(error){alert.error(error);dispatch(clearErrors());}if(updateError){alert.error(updateError);dispatch(clearErrors());}if(isUpdated){alert.success(\"User Updated Successfully\");history.push(\"/admin/users\");dispatch({type:UPDATE_USER_RESET});}},[dispatch,alert,error,history,isUpdated,updateError,user,userId]);const updateUserSubmitHandler=e=>{e.preventDefault();const myForm=new FormData();myForm.set(\"name\",name);myForm.set(\"email\",email);myForm.set(\"role\",role);dispatch(updateUser(userId,myForm));};return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard\",children:[/*#__PURE__*/_jsx(SideBar,{}),/*#__PURE__*/_jsx(\"div\",{className:\"newProductContainer\",children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(\"form\",{className:\"createProductForm\",onSubmit:updateUserSubmitHandler,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(PersonIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\",required:true,value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MailOutlineIcon,{}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",required:true,value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(VerifiedUserIcon,{}),/*#__PURE__*/_jsxs(\"select\",{value:role,onChange:e=>setRole(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Choose Role\"}),/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"})]})]}),/*#__PURE__*/_jsx(Button,{id:\"createProductBtn\",type:\"submit\",disabled:updateLoading?true:false||role===\"\"?true:false,children:\"Update\"})]})})]})]});};export default UpdateUser;","map":{"version":3,"names":["React","Fragment","useEffect","useState","useSelector","useDispatch","useAlert","Button","MetaData","MailOutlineIcon","PersonIcon","VerifiedUserIcon","SideBar","UPDATE_USER_RESET","getUserDetails","updateUser","clearErrors","Loader","jsx","_jsx","jsxs","_jsxs","UpdateUser","_ref","history","match","dispatch","alert","loading","error","user","state","userDetails","updateLoading","updateError","isUpdated","profile","name","setName","email","setEmail","role","setRole","userId","params","id","_id","success","push","type","updateUserSubmitHandler","e","preventDefault","myForm","FormData","set","children","title","className","onSubmit","placeholder","required","value","onChange","target","disabled"],"sources":["C:/Users/SANKET TAVETHIYA/Desktop/MERN PRO/frontend/src/component/Admin/UpdateUser.js"],"sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useAlert } from \"react-alert\";\nimport { Button } from \"@material-ui/core\";\nimport MetaData from \"../layout/MetaData\";\nimport MailOutlineIcon from \"@material-ui/icons/MailOutline\";\nimport PersonIcon from \"@material-ui/icons/Person\";\nimport VerifiedUserIcon from \"@material-ui/icons/VerifiedUser\";\nimport SideBar from \"./Sidebar\";\nimport { UPDATE_USER_RESET } from \"../../constants/userConstants\";\nimport {\n  getUserDetails,\n  updateUser,\n  clearErrors,\n} from \"../../actions/userAction\";\nimport Loader from \"../layout/Loader/Loader\";\n\nconst UpdateUser = ({ history, match }) => {\n  const dispatch = useDispatch();\n  const alert = useAlert();\n\n  const { loading, error, user } = useSelector((state) => state.userDetails);\n\n  const {\n    loading: updateLoading,\n    error: updateError,\n    isUpdated,\n  } = useSelector((state) => state.profile);\n\n  const [name, setName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [role, setRole] = useState(\"\");\n\n  const userId = match.params.id;\n\n  useEffect(() => {\n    if (user && user._id !== userId) {\n      dispatch(getUserDetails(userId));\n    } else {\n      setName(user.name);\n      setEmail(user.email);\n      setRole(user.role);\n    }\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (updateError) {\n      alert.error(updateError);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      alert.success(\"User Updated Successfully\");\n      history.push(\"/admin/users\");\n      dispatch({ type: UPDATE_USER_RESET });\n    }\n  }, [dispatch, alert, error, history, isUpdated, updateError, user, userId]);\n\n  const updateUserSubmitHandler = (e) => {\n    e.preventDefault();\n\n    const myForm = new FormData();\n\n    myForm.set(\"name\", name);\n    myForm.set(\"email\", email);\n    myForm.set(\"role\", role);\n\n    dispatch(updateUser(userId, myForm));\n  };\n\n  return (\n    <Fragment>\n      <MetaData title=\"Update User\" />\n      <div className=\"dashboard\">\n        <SideBar />\n        <div className=\"newProductContainer\">\n          {loading ? (\n            <Loader />\n          ) : (\n            <form\n              className=\"createProductForm\"\n              onSubmit={updateUserSubmitHandler}\n            >\n              <h1>Update User</h1>\n\n              <div>\n                <PersonIcon />\n                <input\n                  type=\"text\"\n                  placeholder=\"Name\"\n                  required\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                />\n              </div>\n              <div>\n                <MailOutlineIcon />\n                <input\n                  type=\"email\"\n                  placeholder=\"Email\"\n                  required\n                  value={email}\n                  onChange={(e) => setEmail(e.target.value)}\n                />\n              </div>\n\n              <div>\n                <VerifiedUserIcon />\n                <select value={role} onChange={(e) => setRole(e.target.value)}>\n                  <option value=\"\">Choose Role</option>\n                  <option value=\"admin\">Admin</option>\n                  <option value=\"user\">User</option>\n                </select>\n              </div>\n\n              <Button\n                id=\"createProductBtn\"\n                type=\"submit\"\n                disabled={\n                  updateLoading ? true : false || role === \"\" ? true : false\n                }\n              >\n                Update\n              </Button>\n            </form>\n          )}\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default UpdateUser;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}